terraform-checks:
  name: Terraform Format & Validate
  runs-on: ubuntu-latest

  steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Set up Terraform
      uses: hashicorp/setup-terraform@v3
      with:
        terraform_version: "1.5.0"

    - name: Terraform Format Check
      run: terraform fmt -check -recursive terraform

    - name: Terraform Init
      run: |
        cd terraform/envs/dev
        terraform init -backend=false

    - name: Terraform Validate
      run: |
        cd terraform/envs/dev
        terraform validate
